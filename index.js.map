{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict'\n\nimport axios from 'axios'\n\nconst API_KEY = \"47390664-00e9f6e051e23aada86cf3665\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nexport const IMAGES_PER_PAGE = 15;\n\nexport async function fetchData(page = 1, searchParams) {\n    const { data } = await axios(BASE_URL, {\n        params: {\n            key: API_KEY,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page,\n            q: searchParams,\n        }\n    });\n    return data;\n}\n","'use strict'\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst loading = document.querySelector(\".loading-container-hide\");\n\nexport function showLoading() {\n    loading.classList.replace(\"loading-container-hide\", \"loading-container-show\");\n}\n\nexport function hideLoading() {\n    loading.classList.replace(\"loading-container-show\", \"loading-container-hide\");\n}\n\nexport function showLoadMoreBtn(loadingMoreBtn) {\n  if (loadingMoreBtn) {\n    loadingMoreBtn.classList.replace(\"loading-btn-hide\", \"loading-btn-show\");\n  }\n}\n\nexport function hideLoadMoreBtn(loadingMoreBtn) {\n  if (loadingMoreBtn) {\n    loadingMoreBtn.classList.replace(\"loading-btn-show\", \"loading-btn-hide\");\n  }\n}\n\nexport function showErrorToast(message = \"Error\") {\n    iziToast.error({\n        position: 'topRight',\n        message: message\n    });\n}\n\nexport function showInfoToast(message = \"Info\") {\n    iziToast.info({\n        position: 'topRight',\n        message: message\n    });\n}\n\nexport function createMarkup(array) {\n    return array.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `<li class=\"gallery-item\">\n            <a\n              class=\"gallery-link\"\n              href=\"${largeImageURL}\"\n            >\n              <img\n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n                width=\"360\"\n                height=\"200\"\n              />\n              <ul class=\"gallery-card-list\">\n                <li>\n                  <div class=\"gallery-card-list-info\">\n                    <p class=\"gallery-card-list-info-title\">Likes</p>\n                    <p class=\"gallery-card-list-info-text\">${likes}</p>\n                  </div>\n                </li>\n                <li>\n                  <div class=\"gallery-card-list-info\">\n                    <p class=\"gallery-card-list-info-title\">Views</p>\n                    <p class=\"gallery-card-list-info-text\">${views}</p>\n                  </div>\n                </li>\n                <li>\n                  <div class=\"gallery-card-list-info\">\n                    <p class=\"gallery-card-list-info-title\">Comments</p>\n                    <p class=\"gallery-card-list-info-text\">${comments}</p>\n                  </div>\n                </li>\n                <li>\n                  <div class=\"gallery-card-list-info\">\n                    <p class=\"gallery-card-list-info-title\">Downloads</p>\n                    <p class=\"gallery-card-list-info-text\">${downloads}</p>\n                  </div>\n                </li>\n              </ul>\n            </a>\n          </li>`\n      }).join('');\n}\n","'use strict'\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchData, IMAGES_PER_PAGE } from \"./js/pixabay-api.js\";\nimport * as render from \"./js/render-functions.js\";\n\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loadingMoreBtn = document.querySelector(\".loading-btn\");\n\nconst galleryLightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom'\n});\n\nlet currentPage = 1;\nlet searchText = \"\";\n\nform.addEventListener(\"submit\", handleSubmit);\nloadingMoreBtn.addEventListener(\"click\", handleClick);\n\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n\n    searchText = event.target.elements.search.value.trim();\n    currentPage = 1;\n\n    if (!searchText) {\n        render.showErrorToast(\"Sorry, the search field is empty. Please try again!\");\n        return;\n    }\n\n    render.hideLoadMoreBtn(loadingMoreBtn);\n    fillInGallery([]);\n    render.showLoading();\n\n    try {\n        const result = await fetchData(currentPage, searchText);\n\n        if (!result.hits.length) {\n            fillInGallery([]);\n            throw new Error(\"Sorry, there are no images matching your search query. Please try again!\");\n        }\n\n        fillInGallery(result.hits);\n        checkIsLastPage((IMAGES_PER_PAGE * currentPage) >= Number(result.totalHits));\n    } catch (error) {\n        render.showErrorToast(error.message)\n    } finally {\n        render.hideLoading();\n    }\n    \n    form.reset();\n}\n\nasync function handleClick(event) {\n    currentPage++;\n    event.target.disabled = true;\n    render.hideLoadMoreBtn(loadingMoreBtn);\n    render.showLoading();\n\n    try {\n        const data = await fetchData(currentPage, searchText);\n\n        addToGallery(data.hits);\n        checkIsLastPage((IMAGES_PER_PAGE * currentPage) >= Number(data.totalHits));\n\n        const galleryItem = document.querySelector(\".gallery-item\");\n        const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n\n        window.scrollBy({\n            left: 0,\n            top: 2 * galleryItemHeight + 80,\n            behavior: \"smooth\"\n        })\n\n    } catch (error) {\n        render.showErrorToast(error.message);\n    } finally {\n        render.hideLoading();\n        event.target.disabled = false;\n    }\n}\n\nfunction fillInGallery(array) {\n    gallery.innerHTML = render.createMarkup(array);\n    galleryLightbox.refresh();\n}\n\nfunction addToGallery(array) {\n    gallery.insertAdjacentHTML(\"beforeend\", render.createMarkup(array));\n    galleryLightbox.refresh();\n}\n\nfunction checkIsLastPage(isLastPage = false) {\n    if (isLastPage) {\n        render.showInfoToast(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n        render.showLoadMoreBtn(loadingMoreBtn);\n    }\n}\n"],"names":["API_KEY","BASE_URL","IMAGES_PER_PAGE","fetchData","page","searchParams","data","axios","loading","showLoading","hideLoading","showLoadMoreBtn","loadingMoreBtn","hideLoadMoreBtn","showErrorToast","message","iziToast","showInfoToast","createMarkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","gallery","galleryLightbox","SimpleLightbox","currentPage","searchText","handleSubmit","handleClick","event","render.showErrorToast","render.hideLoadMoreBtn","fillInGallery","render.showLoading","result","checkIsLastPage","error","render.hideLoading","addToGallery","galleryItemHeight","render.createMarkup","isLastPage","render.showInfoToast","render.showLoadMoreBtn"],"mappings":"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"}